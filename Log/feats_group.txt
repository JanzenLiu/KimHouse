# Current Groups
21 features concerning Religion:
['big_church_km', 'church_synagogue_km', 'mosque_km', 'big_church_count_500', 'church_count_500', 'mosque_count_500', 'big_church_count_1000', 'church_count_1000', 'mosque_count_1000', 'big_church_count_1500', 'church_count_1500', 'mosque_count_1500', 'big_church_count_2000', 'church_count_2000', 'mosque_count_2000', 'big_church_count_3000', 'church_count_3000', 'mosque_count_3000', 'big_church_count_5000', 'church_count_5000', 'mosque_count_5000']

67 features concerning Cafe:
['catering_km', 'cafe_count_500', 'cafe_sum_500_min_price_avg', 'cafe_sum_500_max_price_avg', 'cafe_avg_price_500', 'cafe_count_500_na_price', 'cafe_count_500_price_500', 'cafe_count_500_price_1000', 'cafe_count_500_price_1500', 'cafe_count_500_price_2500', 'cafe_count_500_price_4000', 'cafe_count_500_price_high', 'cafe_count_1000', 'cafe_sum_1000_min_price_avg', 'cafe_sum_1000_max_price_avg', 'cafe_avg_price_1000', 'cafe_count_1000_na_price', 'cafe_count_1000_price_500', 'cafe_count_1000_price_1000', 'cafe_count_1000_price_1500', 'cafe_count_1000_price_2500', 'cafe_count_1000_price_4000', 'cafe_count_1000_price_high', 'cafe_count_1500', 'cafe_sum_1500_min_price_avg', 'cafe_sum_1500_max_price_avg', 'cafe_avg_price_1500', 'cafe_count_1500_na_price', 'cafe_count_1500_price_500', 'cafe_count_1500_price_1000', 'cafe_count_1500_price_1500', 'cafe_count_1500_price_2500', 'cafe_count_1500_price_4000', 'cafe_count_1500_price_high', 'cafe_count_2000', 'cafe_sum_2000_min_price_avg', 'cafe_sum_2000_max_price_avg', 'cafe_avg_price_2000', 'cafe_count_2000_na_price', 'cafe_count_2000_price_500', 'cafe_count_2000_price_1000', 'cafe_count_2000_price_1500', 'cafe_count_2000_price_2500', 'cafe_count_2000_price_4000', 'cafe_count_2000_price_high', 'cafe_count_3000', 'cafe_sum_3000_min_price_avg', 'cafe_sum_3000_max_price_avg', 'cafe_avg_price_3000', 'cafe_count_3000_na_price', 'cafe_count_3000_price_500', 'cafe_count_3000_price_1000', 'cafe_count_3000_price_1500', 'cafe_count_3000_price_2500', 'cafe_count_3000_price_4000', 'cafe_count_3000_price_high', 'cafe_count_5000', 'cafe_sum_5000_min_price_avg', 'cafe_sum_5000_max_price_avg', 'cafe_avg_price_5000', 'cafe_count_5000_na_price', 'cafe_count_5000_price_500', 'cafe_count_5000_price_1000', 'cafe_count_5000_price_1500', 'cafe_count_5000_price_2500', 'cafe_count_5000_price_4000', 'cafe_count_5000_price_high']

12 features concerning Sport:
['sport_objects_raion', 'fitness_km', 'swim_pool_km', 'ice_rink_km', 'stadium_km', 'basketball_km', 'sport_count_500', 'sport_count_1000', 'sport_count_1500', 'sport_count_2000', 'sport_count_3000', 'sport_count_5000']

1 features concerning Time:
['timestamp']

14 features concerning Office:
['office_raion', 'office_km', 'office_count_500', 'office_sqm_500', 'office_count_1000', 'office_sqm_1000', 'office_count_1500', 'office_sqm_1500', 'office_count_2000', 'office_sqm_2000', 'office_count_3000', 'office_sqm_3000', 'office_count_5000', 'office_sqm_5000']

23 features concerning Business:
['shopping_centers_raion', 'big_market_raion', 'big_market_km', 'market_shop_km', 'shopping_centers_km', 'trc_count_500', 'trc_sqm_500', 'market_count_500', 'trc_count_1000', 'trc_sqm_1000', 'market_count_1000', 'trc_count_1500', 'trc_sqm_1500', 'market_count_1500', 'trc_count_2000', 'trc_sqm_2000', 'market_count_2000', 'trc_count_3000', 'trc_sqm_3000', 'market_count_3000', 'trc_count_5000', 'trc_sqm_5000', 'market_count_5000']

28 features concerning Population:
['raion_popul', 'full_all', 'male_f', 'female_f', 'young_all', 'young_male', 'young_female', 'work_all', 'work_male', 'work_female', 'ekder_all', 'ekder_male', 'ekder_female', '0_6_all', '0_6_male', '0_6_female', '7_14_all', '7_14_male', '7_14_female', '0_17_all', '0_17_male', '0_17_female', '16_29_all', '16_29_male', '16_29_female', '0_13_all', '0_13_male', '0_13_female']

10 features concerning Building:
['full_sq', 'life_sq', 'floor', 'max_floor', 'material', 'build_year', 'num_room', 'kitch_sq', 'state', 'product_type']

23 features concerning Industry:
['indust_part', 'culture_objects_top_25', 'culture_objects_top_25_raion', 'thermal_power_plant_raion', 'incineration_raion', 'oil_chemistry_raion', 'radiation_raion', 'nuclear_reactor_raion', 'industrial_km', 'incineration_km', 'oil_chemistry_km', 'nuclear_reactor_km', 'radiation_km', 'power_transmission_line_km', 'thermal_power_plant_km', 'ts_km', 'workplaces_km', 'prom_part_500', 'prom_part_1000', 'prom_part_1500', 'prom_part_2000', 'prom_part_3000', 'prom_part_5000']

16 features concerning NbrBldg:
['raion_build_count_with_material_info', 'build_count_block', 'build_count_wood', 'build_count_frame', 'build_count_brick', 'build_count_monolith', 'build_count_panel', 'build_count_foam', 'build_count_slag', 'build_count_mix', 'raion_build_count_with_builddate_info', 'build_count_before_1920', 'build_count_1921-1945', 'build_count_1946-1970', 'build_count_1971-1995', 'build_count_after_1995']

14 features concerning Education:
['children_preschool', 'preschool_quota', 'preschool_education_centers_raion', 'children_school', 'school_quota', 'school_education_centers_raion', 'school_education_centers_top_20_raion', 'university_top_20_raion', 'additional_education_raion', 'kindergarten_km', 'school_km', 'university_km', 'additional_education_km', 'preschool_km']

12 features concerning GrZone:
['green_zone_part', 'green_zone_km', 'water_treatment_km', 'water_km', 'water_1line', 'ecology', 'green_part_500', 'green_part_1000', 'green_part_1500', 'green_part_2000', 'green_part_3000', 'green_part_5000']

32 features concerning TransPos:
['sub_area', 'area_m', 'railroad_terminal_raion', 'ID_metro', 'metro_min_avto', 'metro_km_avto', 'metro_min_walk', 'metro_km_walk', 'railroad_station_walk_km', 'railroad_station_walk_min', 'ID_railroad_station_walk', 'railroad_station_avto_km', 'railroad_station_avto_min', 'ID_railroad_station_avto', 'public_transport_station_km', 'public_transport_station_min_walk', 'mkad_km', 'ttk_km', 'sadovoe_km', 'bulvar_ring_km', 'kremlin_km', 'big_road1_km', 'ID_big_road1', 'big_road1_1line', 'big_road2_km', 'ID_big_road2', 'railroad_km', 'railroad_1line', 'zd_vokzaly_avto_km', 'ID_railroad_terminal', 'bus_terminal_avto_km', 'ID_bus_terminal']

10 features concerning Leisure:
['park_km', 'theater_km', 'museum_km', 'exhibition_km', 'leisure_count_500', 'leisure_count_1000', 'leisure_count_1500', 'leisure_count_2000', 'leisure_count_3000', 'leisure_count_5000']

7 features not assigned to any group yet:
['hospital_beds_raion', 'healthcare_centers_raion', 'detention_facility_raion', 'cemetery_km', 'hospice_morgue_km', 'detention_facility_km', 'public_healthcare_km']

# Number of nan in counts features
cafe_count_500                0
cafe_count_500_na_price       0
cafe_count_500_price_500      0
cafe_count_500_price_1000     0
cafe_count_500_price_1500     0
cafe_count_500_price_2500     0
cafe_count_500_price_4000     0
cafe_count_500_price_high     0
cafe_count_1000               0
cafe_count_1000_na_price      0
cafe_count_1000_price_500     0
cafe_count_1000_price_1000    0
cafe_count_1000_price_1500    0
cafe_count_1000_price_2500    0
cafe_count_1000_price_4000    0
cafe_count_1000_price_high    0
cafe_count_1500               0
cafe_count_1500_na_price      0
cafe_count_1500_price_500     0
cafe_count_1500_price_1000    0
cafe_count_1500_price_1500    0
cafe_count_1500_price_2500    0
cafe_count_1500_price_4000    0
cafe_count_1500_price_high    0
cafe_count_2000               0
cafe_count_2000_na_price      0
cafe_count_2000_price_500     0
cafe_count_2000_price_1000    0
cafe_count_2000_price_1500    0
cafe_count_2000_price_2500    0
cafe_count_2000_price_4000    0
cafe_count_2000_price_high    0
cafe_count_3000               0
cafe_count_3000_na_price      0
cafe_count_3000_price_500     0
cafe_count_3000_price_1000    0
cafe_count_3000_price_1500    0
cafe_count_3000_price_2500    0
cafe_count_3000_price_4000    0
cafe_count_3000_price_high    0
cafe_count_5000               0
cafe_count_5000_na_price      0
cafe_count_5000_price_500     0
cafe_count_5000_price_1000    0
cafe_count_5000_price_1500    0
cafe_count_5000_price_2500    0
cafe_count_5000_price_4000    0
cafe_count_5000_price_high    0
dtype: int64

# Doing PCA on raw counts features...
Reduced to 48 components

# ROV explained by the principal components
[  9.63070292e-01   3.51395627e-02   6.47146671e-04   4.15083811e-04
   2.35317925e-04   1.16675217e-04   7.36393289e-05   5.14470211e-05
   4.35673938e-05   3.87493262e-05   3.19266379e-05   2.44162626e-05
   1.71196916e-05   1.41330716e-05   1.22758005e-05   1.16307782e-05
   8.83703533e-06   8.01574515e-06   7.00964960e-06   4.66858912e-06
   4.18240367e-06   3.72705414e-06   2.79028494e-06   2.66239503e-06
   2.45076230e-06   2.01924832e-06   1.85003991e-06   1.75715534e-06
   1.42558256e-06   9.71239923e-07   8.92744091e-07   7.85008805e-07
   7.10215630e-07   6.46817648e-07   5.28139872e-07   3.17877381e-07
   2.82525855e-07   2.21278704e-07   1.11889057e-07   8.60757402e-08
   4.82843693e-08   1.79974107e-08   1.77857842e-32   7.61618421e-33
   7.61618421e-33   7.61618421e-33   7.61618421e-33   1.29693502e-34]

# ROV explained together by the 2 most principal components
0.9982098550232592

# Number of nan in prices features
cafe_sum_500_min_price_avg     16440
cafe_sum_500_max_price_avg     16440
cafe_avg_price_500             16440
cafe_sum_1000_min_price_avg     7746
cafe_sum_1000_max_price_avg     7746
cafe_avg_price_1000             7746
cafe_sum_1500_min_price_avg     5020
cafe_sum_1500_max_price_avg     5020
cafe_avg_price_1500             5020
cafe_sum_2000_min_price_avg     2149
cafe_sum_2000_max_price_avg     2149
cafe_avg_price_2000             2149
cafe_sum_3000_min_price_avg     1173
cafe_sum_3000_max_price_avg     1173
cafe_avg_price_3000             1173
cafe_sum_5000_min_price_avg      425
cafe_sum_5000_max_price_avg      425
cafe_avg_price_5000              425
dtype: int64

# Doing PCA on prices features, imputed by their mean
Reduced to 48 components

# ROV explained by the principal components
[  4.71625316e-01   2.48982341e-01   1.30147324e-01   6.67291849e-02
   4.54631080e-02   3.36207389e-02   1.85241688e-03   8.14501224e-04
   3.66768301e-04   1.96019555e-04   1.48116843e-04   5.41639622e-05
   6.13620892e-12   4.86144742e-12   4.44689724e-12   3.28282038e-12
   2.35381375e-12   8.06960799e-13]

# ROV explained together by the 5 most principal components
0.9629472743393983

# Number other features that highly correlated to
work_male                   24
raion_popul                 24
work_female                 23
work_all                    23
7_14_all                    21
7_14_female                 21
office_count_3000           21
young_male                  21
young_all                   21
0_17_all                    21
0_17_male                   21
0_17_female                 21
children_preschool          21
0_13_all                    21
0_13_male                   21
0_13_female                 21
young_female                21
7_14_male                   21
0_6_all                     21
0_6_male                    21
0_6_female                  21
children_school             21
big_church_count_3000       20
church_count_3000           20
office_count_2000           20
leisure_count_3000          19
church_count_2000           18
big_church_count_2000       18
office_count_1500           18
leisure_count_2000          17
                            ..
ID_metro                     1
kindergarten_km              1
green_zone_km                1
industrial_km                1
water_treatment_km           1
cemetery_km                  1
incineration_km              1
ID_railroad_station_walk     1
ID_railroad_station_avto     1
water_km                     1
mkad_km                      1
big_road1_km                 1
ID_big_road1                 1
ID_big_road2                 1
workplaces_km                1
railroad_km                  1
ID_railroad_terminal         1
bus_terminal_avto_km         1
ID_bus_terminal              1
oil_chemistry_km             1
nuclear_reactor_km           1
ts_km                        1
big_market_km                1
market_shop_km               1
fitness_km                   1
ice_rink_km                  1
hospice_morgue_km            1
detention_facility_km        1
university_km                1
full_sq                      1
Length: 208, dtype: int64

# Counts of feats with more than 0.8 correlation
raion_popul     22
full_all         6
male_f           6
female_f         6
young_all       22
young_male      22
young_female    22
work_all        22
work_male       22
work_female     22
ekder_all       22
ekder_male      22
ekder_female    22
0_6_all         22
0_6_male        22
0_6_female      22
7_14_all        22
7_14_male       22
7_14_female     22
0_17_all        22
0_17_male       22
0_17_female     22
16_29_all        6
16_29_male       6
16_29_female     6
0_13_all        22
0_13_male       22
0_13_female     22
dtype: int64

# Numbers of other features more than 0.9 correlated to
office_count_3000           21
church_count_3000           20
big_church_count_3000       20
office_count_2000           20
leisure_count_3000          19
big_church_count_2000       18
church_count_2000           18
office_count_1500           18
leisure_count_2000          17
church_count_1500           16
big_church_count_1500       16
church_count_1000           14
leisure_count_5000          14
big_church_count_1000       14
leisure_count_1500          13
church_count_5000           12
office_count_5000           12
big_church_count_5000       11
office_count_1000           11
office_raion                10
church_count_500            10
big_church_count_500         9
radiation_km                 8
office_sqm_3000              8
stadium_km                   8
ttk_km                       7
sadovoe_km                   7
zd_vokzaly_avto_km           7
basketball_km                7
metro_min_walk               6
                            ..
trc_count_500                1
prom_part_500                1
ID_railroad_station_avto     1
green_part_500               1
water_km                     1
mkad_km                      1
big_road1_km                 1
ID_big_road1                 1
big_road2_km                 1
ID_big_road2                 1
railroad_km                  1
ID_railroad_terminal         1
bus_terminal_avto_km         1
ID_bus_terminal              1
oil_chemistry_km             1
nuclear_reactor_km           1
ts_km                        1
big_market_km                1
market_shop_km               1
fitness_km                   1
hospice_morgue_km            1
detention_facility_km        1
university_km                1
workplaces_km                1
office_km                    1
additional_education_km      1
church_synagogue_km          1
mosque_km                    1
catering_km                  1
full_sq                      1
Length: 180, dtype: int64

# Correlation between office_count_3000 and other features
office_count_3000               1.000000
office_count_2000               0.992660
office_count_1500               0.980071
church_count_3000               0.975822
big_church_count_3000           0.969785
leisure_count_3000              0.965786
leisure_count_5000              0.962047
office_count_5000               0.959369
church_count_5000               0.958491
big_church_count_5000           0.955246
church_count_2000               0.950780
office_count_1000               0.943969
big_church_count_2000           0.943610
office_raion                    0.939055
church_count_1500               0.937864
leisure_count_2000              0.935263
big_church_count_1500           0.928325
office_sqm_3000                 0.917479
church_count_1000               0.914366
big_church_count_1000           0.914215
leisure_count_1500              0.909139
office_sqm_5000                 0.877488
leisure_count_1000              0.873703
church_count_500                0.857981
office_sqm_2000                 0.853933
office_count_500                0.850495
big_church_count_500            0.849142
culture_objects_top_25_raion    0.835334
office_sqm_1500                 0.812261
office_sqm_1000                 0.802693
                                  ...   
big_church_km                  -0.205949
thermal_power_plant_km         -0.207274
catering_km                    -0.210621
nuclear_reactor_km             -0.216688
market_shop_km                 -0.216891
basketball_km                  -0.230233
exhibition_km                  -0.233105
church_synagogue_km            -0.240286
preschool_quota                -0.241796
oil_chemistry_km               -0.244993
bus_terminal_avto_km           -0.247262
university_km                  -0.253138
office_km                      -0.254077
build_count_panel              -0.257095
ice_rink_km                    -0.257825
green_zone_part                -0.258710
stadium_km                     -0.259808
green_part_1500                -0.264974
mosque_km                      -0.289972
detention_facility_km          -0.296901
green_part_2000                -0.297177
museum_km                      -0.312414
green_part_3000                -0.326922
theater_km                     -0.332355
ttk_km                         -0.347496
green_part_5000                -0.368261
zd_vokzaly_avto_km             -0.418903
sadovoe_km                     -0.444022
bulvar_ring_km                 -0.476563
kremlin_km                     -0.495264
Name: office_count_3000, Length: 180, dtype: float64

# Correlation between church_count_3000 and other features
church_count_3000               1.000000
big_church_count_3000           0.984858
church_count_2000               0.980068
office_count_2000               0.976436
office_count_3000               0.975822
leisure_count_3000              0.967966
big_church_count_2000           0.967281
church_count_1500               0.966417
office_count_1500               0.965721
big_church_count_1500           0.951746
leisure_count_2000              0.948862
church_count_1000               0.942174
big_church_count_1000           0.936237
church_count_5000               0.936140
office_count_1000               0.930347
big_church_count_5000           0.929468
leisure_count_5000              0.927758
leisure_count_1500              0.925110
office_raion                    0.915714
office_count_5000               0.912642
leisure_count_1000              0.896886
church_count_500                0.888054
big_church_count_500            0.875202
office_sqm_3000                 0.847286
office_count_500                0.836769
culture_objects_top_25_raion    0.830453
office_sqm_5000                 0.812231
office_sqm_2000                 0.781112
trc_count_3000                  0.773864
sport_count_3000                0.768387
                                  ...   
thermal_power_plant_km         -0.206193
radiation_km                   -0.209808
park_km                        -0.210314
big_church_km                  -0.210926
catering_km                    -0.216640
nuclear_reactor_km             -0.219136
market_shop_km                 -0.220193
green_zone_part                -0.227840
basketball_km                  -0.236627
green_part_1500                -0.238680
exhibition_km                  -0.245305
office_km                      -0.246448
church_synagogue_km            -0.254123
bus_terminal_avto_km           -0.254760
stadium_km                     -0.259373
university_km                  -0.260788
green_part_2000                -0.268045
oil_chemistry_km               -0.268606
ice_rink_km                    -0.271651
detention_facility_km          -0.290072
green_part_3000                -0.294373
mosque_km                      -0.297076
museum_km                      -0.319448
theater_km                     -0.330782
ttk_km                         -0.337131
green_part_5000                -0.337378
zd_vokzaly_avto_km             -0.404064
sadovoe_km                     -0.433061
bulvar_ring_km                 -0.465871
kremlin_km                     -0.486187
Name: church_count_3000, Length: 180, dtype: float64

# Start studying office features


# ROV explained by the principal components
[  9.76405674e-01   1.79970007e-02   3.96905379e-03   1.09108242e-03
   4.15695678e-04   1.21492785e-04   3.63323920e-10   3.64976043e-11
   8.61094873e-12   2.84426055e-12   6.47310182e-13   5.00914555e-13
   1.82512095e-13   6.23776707e-14]

# ROV explained together by the 2 most principal components
0.9944026749108111

# Start studying religion features


# ROV explained by the principal components
[  9.48811502e-01   3.60817123e-02   6.96672249e-03   3.79466488e-03
   1.50013562e-03   1.30645973e-03   5.84203133e-04   2.78661700e-04
   1.86038799e-04   1.41262668e-04   8.07508541e-05   7.38895352e-05
   5.85916171e-05   4.35992148e-05   3.94811763e-05   2.11615962e-05
   1.64486933e-05   9.14533199e-06   3.34354358e-06   1.48934625e-06
   7.36190393e-07]

# ROV explained together by the 3 most principal components
0.9918599363696365

# Columns left now:
161

